# $Id: Makefile.in,v 1.1 2005/09/03 06:05:37 michael Exp $

CC		= @CC@
AR		= @AR@
RM		= @RM@
SED		= @SED@
SEDOBJ		= @SEDOBJ@
STDOUT		= @STDOUT@
CFLAGS		= @IRC_CFLAGS@
MKDEP		= @MKDEP@
MV		= @MV@
LD		= @LD@

IRCDLIBS        = @LIBS@ $(SSL_LIBS)

INCLUDES	= -I.
CPPFLAGS	= ${INCLUDES} @CPPFLAGS@

PCRE_SRCS = \
  pcre_compile.c      \
  pcre_exec.c         \
  pcre_globals.c      \
  pcre_printint.c     \
  pcre_tables.c       \
  pcre_valid_utf8.c   \
  pcre_config.c       \
  pcre_fullinfo.c     \
  pcre_refcount.c     \
  pcre_try_flipped.c  \
  pcre_version.c      \
  pcre_chartables.c   \
  pcre_dfa_exec.c     \
  pcre_get.c          \
  pcre_ord2utf8.c     \
  pcre_study.c        \
  pcre_ucp_findchar.c \
  pcre_xclass.c

OBJS = ${PCRE_SRCS:.c=.o}

default: build
build: all
all: .depend libpcre.a

libpcre.a: $(OBJS)
	$(RM) -f $@
	$(AR) csrv $@ $(OBJS) 

.c.o:
	${CC} ${CPPFLAGS} ${CFLAGS} -c $< -o $@

.depend:
	${MKDEP} ${CPPFLAGS} ${PCRE_SRCS} ${STDOUT}
	@${SED} -e '/^# Autogenerated - do not delete/,$$d' <Makefile >Makefile.depend
	@echo "# Autogenerated - do not delete" >>Makefile.depend
	@echo "include .depend" >> Makefile.depend
	@${MV} Makefile.depend Makefile

clean:
	${RM} -f *~ *.o *.a

distclean: clean
	${RM} -f Makefile .depend

.PHONY: clean distclean install build
