# $Id: Makefile.in,v 1.7 2003/05/24 05:48:49 joshk Exp $

INSTALL		= @INSTALL@
INSTALL_DATA	= @INSTALL_DATA@
MV		= @MV@
RM		= @RM@

# no whitespace here, test will mess up
CLOBBER=@CLOBBER@

prefix		= @prefix@
sysconfdir	= @sysconfdir@
exec_prefix	= @exec_prefix@

DISTFILES	= @EXAMPLE_CONF@
NOMVFILES	= ircd.motd

all:

install:
	mkdir -p $(sysconfdir)
	@for i in $(DISTFILES); do \
		if test -f $(sysconfdir)/$$i -a -z "$(CLOBBER)"; then \
			echo $(MV) $(sysconfdir)/$$i $(sysconfdir)/$$i.old; \
			$(MV) $(sysconfdir)/$$i $(sysconfdir)/$$i.old; \
		fi; \
		echo $(INSTALL_DATA) $$i $(sysconfdir); \
		$(INSTALL_DATA) $$i $(sysconfdir); \
	done

	@echo "Note: additional example configuration files can be found in this directory (etc/)."

	@for i in $(NOMVFILES); do \
		if test ! -f $(sysconfdir)/$$i; then \
			echo $(INSTALL_DATA) $$i $(sysconfdir); \
			$(INSTALL_DATA) $$i $(sysconfdir); \
		fi; \
	done

	@for i in d k x; do \
		if test ! -f "$(sysconfdir)/$${i}line.conf"; then \
			echo touch $(sysconfdir)/$${i}line.conf; \
			touch $(sysconfdir)/$${i}line.conf; \
		fi; \
	done

	@for i in n c; do \
		if test ! -f "$(sysconfdir)/$${i}resv.conf"; then \
			echo touch $(sysconfdir)/$${i}resv.conf; \
			touch $(sysconfdir)/$${i}resv.conf; \
		fi; \
	done

distclean:
	${RM} -f Makefile
